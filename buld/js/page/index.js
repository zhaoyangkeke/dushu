"use strict";define(["jquery","swiper","text!templay/lunbo.html","text!templay/hot.html","text!templay/tuijian.html","text!templay/mian.html","text!templay/lick.html","text!templay/gd.html","temp","lazyload"],function(o,t,a,i,s,e,l,c,d,n){var r=o(".header ul").find("li"),h=new t(".scroll",{on:{slideChange:function(){r.eq(this.activeIndex).addClass("active").siblings().removeClass("active")}}});function m(t,a){var i=5*t,e=5*t+5,n=a.slice(i,e);return n.map(function(t,a){t.count=a+1}),n}r.on("click",function(){var t=o(this).index();o(this).addClass("active").siblings().removeClass("active"),h.slideTo(t,250,!1)}),o.ajax({url:"/api/city",dataType:"json",success:function(n){console.log(n),d(a,n.items[0].data,".swiper-scroll");new t(".banner",{autoplay:{delay:1500},loop:!0});d(i,n.items[1],".newWeek"),n.items[5].data.data.map(function(t){t.cover=t.data.cover,t.title=t.data.title}),d(e,n.items[5].data.data,".xianM");d(s,m(1,n.items[2].data.data),".tui-jian"),d(l,m(1,n.items[3].data.data),".gilr-say"),d(l,m(1,n.items[4].data.data),".boy-say"),o(".book-city").on("click",".change-btn",function(){var t=1*o(this).data("id"),a=o(this).attr("data"),i=n.items[a];t++,t%=i.data.count/5;var e=2==a?s:l;o(this).data("id",t),d(e,m(t,i.data.data),"."+o(this).parents(".huan").prev().attr("class"))}),d(c,n.items[6].data.data,".zhuan-ti"),y(".book-city"),o("img.lazy").lazyload({effect:"fadeIn",container:o(".book-city")})}}),o.ajax({url:"/api/jia",dataType:"json",success:function(t){console.log(t),d(l,t.items,".shuJia-content"),o("img.lazy").lazyload({effect:"fadeIn",container:o(".book-jia")}),o(".bookPlay-icon").on("click",function(){o(this).children().toggleClass("icon-shouqi-01"),o(this).children().hasClass("icon-shouqi-01")?d(e,t.items,".shuJia-content"):d(l,t.items,".shuJia-content"),o("img.lazy").lazyload({effect:"fadeIn",container:o(".book-jia")})})}});var u=0;function y(t){o(t).on("scroll",function(){var t,a=o(this).height(),i=o(this).children().height()-a;o(this).scrollTop()+30>=i&&(o(this).off("scroll"),t=++u,o.ajax({url:"/api/loadMore",data:{pagenum:t,limit:10},dataType:"json",success:function(t){3<=u?o(".loading").html("暂无更多"):(d(l,t.items,".content-list",1),y(".book-city"),o("img.lazy").lazyload({effect:"fadeIn",container:o(".book-city")}))}}))})}});